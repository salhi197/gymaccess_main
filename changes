$('#input_id').on('change', function () {
        const inputVal = $('#input_id').val();
        if (inputVal.length > 0) {
            let number = parseInt(inputVal, 10);
            let matricules = {!! json_encode(Config::get('matricules')) !!};
            let exists = false;

            matricules.map(function (matricule) {
                if (matricule.matricule == number) {
                    exists = true;
                }
            });

            if (!exists) {
                toastr.error('Carte Non valide');
                $('#input_id').val("");
                return;
            }

            $.ajax({
                url: '{{ url("/scan/write") }}',
                method: 'POST',
                data: {
                    value: number,
                    _token: $('meta[name="csrf-token"]').attr('content') 
                },
                success: function () {
                    @if(\App\Setting::getSetting('minus') == 1)
                        window.location.href = '/membre/compte/' + number;
                    @else
                        window.location.href = '/membre/edit/' + number;
                    @endif
                },
                error: function () {
                    toastr.error('فشل في إرسال البيانات.');
                }
            });
        }
    });
