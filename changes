    public function bloquer($inscriptionId)
    {
        $inscription = Inscription::findOrFail($inscriptionId);
        if ($inscription->etat === 'bloqued') {
            return response()->json(['message' => 'This inscription is already blocked.'], 400);
        }
        
        try {
            DB::beginTransaction();
            $inscriptionsToBlock = Inscription::where('membre', $inscription->membre)
                ->where('etat', 1)
                ->get();
        
            foreach ($inscriptionsToBlock as $ins) {
                Bloque::create([
                    'inscription_id' => $ins->id,
                    'date_bloque' => Carbon::now(),
                    'agent_bloque' => Auth::id(),
                ]);
        
                $ins->update(['etat' => 'bloqued']);
            }
        
            DB::commit();
        
            return redirect()->back()->with('success', ' insÃ©rÃ© avec succÃ©s ');          
        
        } catch (\Exception $e) {
            DB::rollBack();
            return response()->json(['message' => 'An error occurred.', 'error' => $e->getMessage()], 500);
        }
        
    }
